var le={};function k(){return k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},k.apply(this,arguments)}function Le(t,e){if(t==null)return{};var n={},o=Object.keys(t),r,i;for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function j(){return j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},j.apply(this,arguments)}const bt=".json",It="FEDERATION_DEBUG",St="1",$t=":";function vt(){return typeof window<"u"}function Nt(){try{if(vt()&&window.localStorage)return localStorage.getItem(It)===St}catch{return!1}return!1}function He(){return typeof process<"u"&&le&&le.FEDERATION_DEBUG?!!le.FEDERATION_DEBUG:typeof FEDERATION_DEBUG<"u"&&FEDERATION_DEBUG?!0:Nt()}const Rt="[ Federation Runtime ]",xe=function(...t){return t.length?t.reduce((e,n)=>n?e?`${e}${$t}${n}`:n:e,""):""},me=(t,e)=>{if("getPublicPath"in t){let n;return t.getPublicPath.startsWith("function")?n=new Function("return "+t.getPublicPath)()():n=new Function(t.getPublicPath)(),`${n}${e}`}else return"publicPath"in t?`${t.publicPath}${e}`:(console.warn("Cannot get resource URL. If in debug mode, please ignore.",t,e),"")},Fe=t=>{console.warn(`${Rt}: ${t}`)};function je(t){try{return JSON.stringify(t,null,2)}catch{return""}}const Z=(t,e)=>{if(!t)return e;const n=(o=>{if(o===".")return"";if(o.startsWith("./"))return o.replace("./","");if(o.startsWith("/")){const r=o.slice(1);return r.endsWith("/")?r.slice(0,-1):r}return o})(t);return n?n.endsWith("/")?`${n}${e}`:`${n}/${e}`:e};function Ot(t){return t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function kt(t,e={}){var n,o;const{remotes:r={},overrides:i={},version:s}=e;let a;const l=()=>"publicPath"in t.metaData?t.metaData.publicPath==="auto"&&s?Ot(s):t.metaData.publicPath:t.metaData.getPublicPath,c=Object.keys(i);let u={};if(!Object.keys(r).length){var h;u=((h=t.remotes)==null?void 0:h.reduce((y,v)=>{let S;const E=v.federationContainerName;return c.includes(E)?S=i[E]:"version"in v?S=v.version:S=v.entry,y[E]={matchedVersion:S},y},{}))||{}}Object.keys(r).forEach(y=>u[y]={matchedVersion:c.includes(y)?i[y]:r[y]});const{remoteEntry:{path:p,name:f,type:m},types:d,buildInfo:{buildVersion:g},globalName:_,ssrRemoteEntry:b}=t.metaData,{exposes:$}=t;let I={version:s||"",buildVersion:g,globalName:_,remoteEntry:Z(p,f),remoteEntryType:m,remoteTypes:Z(d.path,d.name),remoteTypesZip:d.zip||"",remoteTypesAPI:d.api||"",remotesInfo:u,shared:t==null?void 0:t.shared.map(y=>({assets:y.assets,sharedName:y.name,version:y.version})),modules:$==null?void 0:$.map(y=>({moduleName:y.name,modulePath:y.path,assets:y.assets}))};if((n=t.metaData)!=null&&n.prefetchInterface){const y=t.metaData.prefetchInterface;I=j({},I,{prefetchInterface:y})}if((o=t.metaData)!=null&&o.prefetchEntry){const{path:y,name:v,type:S}=t.metaData.prefetchEntry;I=j({},I,{prefetchEntry:Z(y,v),prefetchEntryType:S})}if("publicPath"in t.metaData?a=j({},I,{publicPath:l()}):a=j({},I,{getPublicPath:l()}),b){const y=Z(b.path,b.name);a.ssrRemoteEntry=y,a.ssrRemoteEntryType=b.type||"commonjs-module"}return a}function Ce(t){return!!("remoteEntry"in t&&t.remoteEntry.includes(bt))}let wt=class{log(...t){console.log(this.prefix,...t)}warn(...t){console.log(this.prefix,...t)}error(...t){console.log(this.prefix,...t)}success(...t){console.log(this.prefix,...t)}info(...t){console.log(this.prefix,...t)}ready(...t){console.log(this.prefix,...t)}debug(...t){He()&&console.log(this.prefix,...t)}constructor(t){this.prefix=t}};function At(t){return new wt(t)}async function Ge(t,e){try{return await t()}catch(n){Fe(n);return}}function Ue(t,e){const n=/^(https?:)?\/\//i,o=t.replace(n,"").replace(/\/$/,""),r=e.replace(n,"").replace(/\/$/,"");return o===r}function Be(t){let e=null,n=!0,o=2e4,r;const i=document.getElementsByTagName("script");for(let a=0;a<i.length;a++){const l=i[a],c=l.getAttribute("src");if(c&&Ue(c,t.url)){e=l,n=!1;break}}if(!e){const a=t.attrs;e=document.createElement("script"),e.type=(a==null?void 0:a.type)==="module"?"module":"text/javascript";let l;t.createScriptHook&&(l=t.createScriptHook(t.url,t.attrs),l instanceof HTMLScriptElement?e=l:typeof l=="object"&&("script"in l&&l.script&&(e=l.script),"timeout"in l&&l.timeout&&(o=l.timeout))),e.src||(e.src=t.url),a&&!l&&Object.keys(a).forEach(c=>{e&&(c==="async"||c==="defer"?e[c]=a[c]:e.getAttribute(c)||e.setAttribute(c,a[c]))})}const s=async(a,l)=>{clearTimeout(r);const c=()=>{(l==null?void 0:l.type)==="error"?t!=null&&t.onErrorCallback&&(t==null||t.onErrorCallback(l)):t!=null&&t.cb&&(t==null||t.cb())};if(e&&(e.onerror=null,e.onload=null,Ge(()=>{const{needDeleteScript:u=!0}=t;u&&e!=null&&e.parentNode&&e.parentNode.removeChild(e)}),a&&typeof a=="function")){const u=a(l);if(u instanceof Promise){const h=await u;return c(),h}return c(),u}c()};return e.onerror=s.bind(null,e.onerror),e.onload=s.bind(null,e.onload),r=setTimeout(()=>{s(null,new Error(`Remote script "${t.url}" time-outed.`))},o),{script:e,needAttach:n}}function ce(t){let e=null,n=!0;const o=document.getElementsByTagName("link");for(let i=0;i<o.length;i++){const s=o[i],a=s.getAttribute("href"),l=s.getAttribute("rel");if(a&&Ue(a,t.url)&&l===t.attrs.rel){e=s,n=!1;break}}if(!e){e=document.createElement("link"),e.setAttribute("href",t.url);let i;const s=t.attrs;t.createLinkHook&&(i=t.createLinkHook(t.url,s),i instanceof HTMLLinkElement&&(e=i)),s&&!i&&Object.keys(s).forEach(a=>{e&&!e.getAttribute(a)&&e.setAttribute(a,s[a])})}const r=(i,s)=>{const a=()=>{(s==null?void 0:s.type)==="error"?t!=null&&t.onErrorCallback&&(t==null||t.onErrorCallback(s)):t!=null&&t.cb&&(t==null||t.cb())};if(e&&(e.onerror=null,e.onload=null,Ge(()=>{const{needDeleteLink:l=!0}=t;l&&e!=null&&e.parentNode&&e.parentNode.removeChild(e)}),i)){const l=i(s);return a(),l}a()};return e.onerror=r.bind(null,e.onerror),e.onload=r.bind(null,e.onload),{link:e,needAttach:n}}function Tt(t,e){const{attrs:n={},createScriptHook:o}=e;return new Promise((r,i)=>{const{script:s,needAttach:a}=Be({url:t,cb:r,onErrorCallback:i,attrs:j({fetchpriority:"high"},n),createScriptHook:o,needDeleteScript:!0});a&&document.head.appendChild(s)})}const Ve="RUNTIME-001",We="RUNTIME-002",ze="RUNTIME-003",qe="RUNTIME-004",Ke="RUNTIME-005",fe="RUNTIME-006",Je="RUNTIME-007",Ye="RUNTIME-008",Dt="TYPE-001",Pt="BUILD-001",Mt=t=>`https://module-federation.io/guide/troubleshooting/${t.split("-")[0].toLowerCase()}/${t}`,F=(t,e,n,o)=>{const r=[`${[e[t]]} #${t}`];return n&&r.push(`args: ${JSON.stringify(n)}`),r.push(Mt(t)),o&&r.push(`Original Error Message:
 ${o}`),r.join(`
`)};function pe(){return pe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},pe.apply(this,arguments)}const H={[Ve]:"Failed to get remoteEntry exports.",[We]:'The remote entry interface does not contain "init"',[ze]:"Failed to get manifest.",[qe]:"Failed to locate remote.",[Ke]:"Invalid loadShareSync function call from bundler runtime",[fe]:"Invalid loadShareSync function call from runtime",[Je]:"Failed to get remote snapshot.",[Ye]:"Failed to load script resources."},Lt={[Dt]:"Failed to generate type declaration."},Ht={[Pt]:"Failed to find expose module."};pe({},H,Lt,Ht);const se="[ Federation Runtime ]",Ze=At(se);function R(t,e){t||P(e)}function P(t){throw t instanceof Error?(t.message=`${se}: ${t.message}`,t):new Error(`${se}: ${t}`)}function ie(t){t instanceof Error&&(t.message=`${se}: ${t.message}`),Ze.warn(t)}function ve(t,e){return t.findIndex(n=>n===e)===-1&&t.push(e),t}function z(t){return"version"in t&&t.version?`${t.name}:${t.version}`:"entry"in t&&t.entry?`${t.name}:${t.entry}`:`${t.name}`}function _e(t){return typeof t.entry<"u"}function Xe(t){return!t.entry.includes(".json")&&t.entry.includes(".js")}function ge(t){return t&&typeof t=="object"}const xt=Object.prototype.toString;function Ft(t){return xt.call(t)==="[object Object]"}function Qe(t){return Array.isArray(t)?t:[t]}function et(t){const e={url:"",type:"global",globalName:""};return"remoteEntry"in t?{url:t.remoteEntry,type:t.remoteEntryType,globalName:t.globalName}:e}const jt=(t,e)=>{let n;return t.endsWith("/")?n=t.slice(0,-1):n=t,e.startsWith(".")&&(e=e.slice(1)),n=n+e,n},N=typeof globalThis=="object"?globalThis:window,M=(()=>{try{return document.defaultView}catch{return N}})(),q=M;function Q(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!1,writable:!0})}function ee(t,e){return Object.hasOwnProperty.call(t,e)}ee(N,"__GLOBAL_LOADING_REMOTE_ENTRY__")||Q(N,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const G=N.__GLOBAL_LOADING_REMOTE_ENTRY__;function tt(t){var e,n,o,r,i,s;ee(t,"__VMOK__")&&!ee(t,"__FEDERATION__")&&Q(t,"__FEDERATION__",t.__VMOK__),ee(t,"__FEDERATION__")||(Q(t,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),Q(t,"__VMOK__",t.__FEDERATION__)),(e=t.__FEDERATION__).__GLOBAL_PLUGIN__!=null||(e.__GLOBAL_PLUGIN__=[]),(n=t.__FEDERATION__).__INSTANCES__!=null||(n.__INSTANCES__=[]),(o=t.__FEDERATION__).moduleInfo!=null||(o.moduleInfo={}),(r=t.__FEDERATION__).__SHARE__!=null||(r.__SHARE__={}),(i=t.__FEDERATION__).__MANIFEST_LOADING__!=null||(i.__MANIFEST_LOADING__={}),(s=t.__FEDERATION__).__PRELOADED_MAP__!=null||(s.__PRELOADED_MAP__=new Map)}tt(N);tt(M);function Ct(t){N.__FEDERATION__.__INSTANCES__.push(t)}function Gt(){return N.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function Ut(t,e=He()){e&&(N.__FEDERATION__.__DEBUG_CONSTRUCTOR__=t,N.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.10.0")}function B(t,e){if(typeof e=="string"){if(t[e])return{value:t[e],key:e};{const n=Object.keys(t);for(const o of n){const[r,i]=o.split(":"),s=`${r}:${e}`,a=t[s];if(a)return{value:a,key:s}}return{value:void 0,key:e}}}else throw new Error("key must be string")}const Ne=()=>M.__FEDERATION__.moduleInfo,Bt=(t,e)=>{const n=z(t),o=B(e,n).value;if(o&&!o.version&&"version"in t&&t.version&&(o.version=t.version),o)return o;if("version"in t&&t.version){const{version:r}=t,i=Le(t,["version"]),s=z(i),a=B(M.__FEDERATION__.moduleInfo,s).value;if((a==null?void 0:a.version)===r)return a}},te=t=>Bt(t,M.__FEDERATION__.moduleInfo),Re=(t,e)=>{const n=z(t);return M.__FEDERATION__.moduleInfo[n]=e,M.__FEDERATION__.moduleInfo},Vt=t=>(M.__FEDERATION__.moduleInfo=k({},M.__FEDERATION__.moduleInfo,t),()=>{const e=Object.keys(t);for(const n of e)delete M.__FEDERATION__.moduleInfo[n]}),Oe=(t,e)=>{const n=e||`__FEDERATION_${t}:custom__`,o=N[n];return{remoteEntryKey:n,entryExports:o}},Wt=()=>M.__FEDERATION__.__GLOBAL_PLUGIN__,zt=t=>N.__FEDERATION__.__PRELOADED_MAP__.get(t),qt=t=>N.__FEDERATION__.__PRELOADED_MAP__.set(t,!0),Y="default",ot="global",ke="[0-9A-Za-z-]+",Ee=`(?:\\+(${ke}(?:\\.${ke})*))`,W="0|[1-9]\\d*",oe="[0-9]+",nt="\\d*[a-zA-Z-][a-zA-Z0-9-]*",we=`(?:${oe}|${nt})`,Kt=`(?:-?(${we}(?:\\.${we})*))`,Ae=`(?:${W}|${nt})`,rt=`(?:-(${Ae}(?:\\.${Ae})*))`,ue=`${W}|x|X|\\*`,V=`[v=\\s]*(${ue})(?:\\.(${ue})(?:\\.(${ue})(?:${rt})?${Ee}?)?)?`,Jt=`^\\s*(${V})\\s+-\\s+(${V})\\s*$`,Yt=`(${oe})\\.(${oe})\\.(${oe})`,Zt=`[v=\\s]*${Yt}${Kt}?${Ee}?`,be="((?:<|>)?=?)",Xt=`(\\s*)${be}\\s*(${Zt}|${V})`,st="(?:~>?)",Qt=`(\\s*)${st}\\s+`,it="(?:\\^)",eo=`(\\s*)${it}\\s+`,to="(<|>)?=?\\s*\\*",oo=`^${it}${V}$`,no=`(${W})\\.(${W})\\.(${W})`,ro=`v?${no}${rt}?${Ee}?`,so=`^${st}${V}$`,io=`^${be}\\s*${V}$`,ao=`^${be}\\s*(${ro})$|^$`,lo="^\\s*>=\\s*0.0.0\\s*$";function L(t){return new RegExp(t)}function O(t){return!t||t.toLowerCase()==="x"||t==="*"}function at(...t){return e=>t.reduce((n,o)=>o(n),e)}function Te(t){return t.match(L(ao))}function De(t,e,n,o){const r=`${t}.${e}.${n}`;return o?`${r}-${o}`:r}function co(t){return t.replace(L(Jt),(e,n,o,r,i,s,a,l,c,u,h,p)=>(O(o)?n="":O(r)?n=`>=${o}.0.0`:O(i)?n=`>=${o}.${r}.0`:n=`>=${n}`,O(c)?l="":O(u)?l=`<${Number(c)+1}.0.0-0`:O(h)?l=`<${c}.${Number(u)+1}.0-0`:p?l=`<=${c}.${u}.${h}-${p}`:l=`<=${l}`,`${n} ${l}`.trim()))}function uo(t){return t.replace(L(Xt),"$1$2$3")}function ho(t){return t.replace(L(Qt),"$1~")}function mo(t){return t.replace(L(eo),"$1^")}function fo(t){return t.trim().split(/\s+/).map(e=>e.replace(L(oo),(n,o,r,i,s)=>O(o)?"":O(r)?`>=${o}.0.0 <${Number(o)+1}.0.0-0`:O(i)?o==="0"?`>=${o}.${r}.0 <${o}.${Number(r)+1}.0-0`:`>=${o}.${r}.0 <${Number(o)+1}.0.0-0`:s?o==="0"?r==="0"?`>=${o}.${r}.${i}-${s} <${o}.${r}.${Number(i)+1}-0`:`>=${o}.${r}.${i}-${s} <${o}.${Number(r)+1}.0-0`:`>=${o}.${r}.${i}-${s} <${Number(o)+1}.0.0-0`:o==="0"?r==="0"?`>=${o}.${r}.${i} <${o}.${r}.${Number(i)+1}-0`:`>=${o}.${r}.${i} <${o}.${Number(r)+1}.0-0`:`>=${o}.${r}.${i} <${Number(o)+1}.0.0-0`)).join(" ")}function po(t){return t.trim().split(/\s+/).map(e=>e.replace(L(so),(n,o,r,i,s)=>O(o)?"":O(r)?`>=${o}.0.0 <${Number(o)+1}.0.0-0`:O(i)?`>=${o}.${r}.0 <${o}.${Number(r)+1}.0-0`:s?`>=${o}.${r}.${i}-${s} <${o}.${Number(r)+1}.0-0`:`>=${o}.${r}.${i} <${o}.${Number(r)+1}.0-0`)).join(" ")}function yo(t){return t.split(/\s+/).map(e=>e.trim().replace(L(io),(n,o,r,i,s,a)=>{const l=O(r),c=l||O(i),u=c||O(s);return o==="="&&u&&(o=""),a="",l?o===">"||o==="<"?"<0.0.0-0":"*":o&&u?(c&&(i=0),s=0,o===">"?(o=">=",c?(r=Number(r)+1,i=0,s=0):(i=Number(i)+1,s=0)):o==="<="&&(o="<",c?r=Number(r)+1:i=Number(i)+1),o==="<"&&(a="-0"),`${o+r}.${i}.${s}${a}`):c?`>=${r}.0.0${a} <${Number(r)+1}.0.0-0`:u?`>=${r}.${i}.0${a} <${r}.${Number(i)+1}.0-0`:n})).join(" ")}function _o(t){return t.trim().replace(L(to),"")}function go(t){return t.trim().replace(L(lo),"")}function ne(t,e){return t=Number(t)||t,e=Number(e)||e,t>e?1:t===e?0:-1}function Eo(t,e){const{preRelease:n}=t,{preRelease:o}=e;if(n===void 0&&o)return 1;if(n&&o===void 0)return-1;if(n===void 0&&o===void 0)return 0;for(let r=0,i=n.length;r<=i;r++){const s=n[r],a=o[r];if(s!==a)return s===void 0&&a===void 0?0:s?a?ne(s,a):-1:1}return 0}function X(t,e){return ne(t.major,e.major)||ne(t.minor,e.minor)||ne(t.patch,e.patch)||Eo(t,e)}function he(t,e){return t.version===e.version}function bo(t,e){switch(t.operator){case"":case"=":return he(t,e);case">":return X(t,e)<0;case">=":return he(t,e)||X(t,e)<0;case"<":return X(t,e)>0;case"<=":return he(t,e)||X(t,e)>0;case void 0:return!0;default:return!1}}function Io(t){return at(fo,po,yo,_o)(t)}function So(t){return at(co,uo,ho,mo)(t.trim()).split(/\s+/).join(" ")}function re(t,e){if(!t)return!1;const n=So(e).split(" ").map(u=>Io(u)).join(" ").split(/\s+/).map(u=>go(u)),o=Te(t);if(!o)return!1;const[,r,,i,s,a,l]=o,c={version:De(i,s,a,l),major:i,minor:s,patch:a,preRelease:l==null?void 0:l.split(".")};for(const u of n){const h=Te(u);if(!h)return!1;const[,p,,f,m,d,g]=h,_={operator:p,version:De(f,m,d,g),major:f,minor:m,patch:d,preRelease:g==null?void 0:g.split(".")};if(!bo(_,c))return!1}return!0}function $o(t,e,n,o){let r;"get"in t?r=t.get:"lib"in t?r=()=>Promise.resolve(t.lib):r=()=>Promise.resolve(()=>{throw new Error(`Can not get shared '${n}'!`)}),t.strategy&&ie('"shared.strategy is deprecated, please set in initOptions.shareStrategy instead!"');var i,s,a;return k({deps:[],useIn:[],from:e,loading:null},t,{shareConfig:k({requiredVersion:`^${t.version}`,singleton:!1,eager:!1,strictVersion:!1},t.shareConfig),get:r,loaded:t!=null&&t.loaded||"lib"in t?!0:void 0,version:(i=t.version)!=null?i:"0",scope:Array.isArray(t.scope)?t.scope:[(s=t.scope)!=null?s:"default"],strategy:((a=t.strategy)!=null?a:o)||"version-first"})}function lt(t,e){const n=e.shared||{},o=e.name,r=Object.keys(n).reduce((s,a)=>{const l=Qe(n[a]);return s[a]=s[a]||[],l.forEach(c=>{s[a].push($o(c,o,a,e.shareStrategy))}),s},{}),i=k({},t.shared);return Object.keys(r).forEach(s=>{i[s]?r[s].forEach(a=>{i[s].find(l=>l.version===a.version)||i[s].push(a)}):i[s]=r[s]}),{shared:i,shareInfos:r}}function K(t,e){const n=o=>{if(!Number.isNaN(Number(o))){const r=o.split(".");let i=o;for(let s=0;s<3-r.length;s++)i+=".0";return i}return o};return!!re(n(t),`<=${n(e)}`)}const Ie=(t,e)=>{const n=e||function(o,r){return K(o,r)};return Object.keys(t).reduce((o,r)=>!o||n(o,r)||o==="0"?r:o,0)},Se=t=>!!t.loaded||typeof t.lib=="function",vo=t=>!!t.loading;function No(t,e,n){const o=t[e][n],r=function(i,s){return!Se(o[i])&&K(i,s)};return Ie(t[e][n],r)}function Ro(t,e,n){const o=t[e][n],r=function(i,s){const a=l=>Se(l)||vo(l);return a(o[s])?a(o[i])?!!K(i,s):!0:a(o[i])?!1:K(i,s)};return Ie(t[e][n],r)}function Oo(t){return t==="loaded-first"?Ro:No}function C(t,e,n,o){if(!t)return;const{shareConfig:r,scope:i=Y,strategy:s}=n,a=Array.isArray(i)?i:[i];for(const l of a)if(r&&t[l]&&t[l][e]){const{requiredVersion:c}=r,u=Oo(s)(t,l,e),h=()=>{if(r.singleton){if(typeof c=="string"&&!re(u,c)){const f=`Version ${u} from ${u&&t[l][e][u].from} of shared singleton module ${e} does not satisfy the requirement of ${n.from} which needs ${c})`;r.strictVersion?P(f):ie(f)}return t[l][e][u]}else{if(c===!1||c==="*"||re(u,c))return t[l][e][u];for(const[f,m]of Object.entries(t[l][e]))if(re(f,c))return m}},p={shareScopeMap:t,scope:l,pkgName:e,version:u,GlobalFederation:q.__FEDERATION__,resolver:h};return(o.emit(p)||p).resolver()}}function ct(){return q.__FEDERATION__.__SHARE__}function Pe(t){const{pkgName:e,extraOptions:n,shareInfos:o}=t,r=a=>{if(!a)return;const l={};a.forEach(u=>{l[u.version]=u});const c=Ie(l,function(u,h){return!Se(l[u])&&K(u,h)});return l[c]};var i;const s=(i=n==null?void 0:n.resolver)!=null?i:r;return Object.assign({},s(o[e]),n==null?void 0:n.customShareInfo)}function ko(){return typeof FEDERATION_BUILD_IDENTIFIER<"u"?FEDERATION_BUILD_IDENTIFIER:""}function wo(t,e){for(const n of t){const o=e.startsWith(n.name);let r=e.replace(n.name,"");if(o){if(r.startsWith("/")){const a=n.name;return r=`.${r}`,{pkgNameOrAlias:a,expose:r,remote:n}}else if(r==="")return{pkgNameOrAlias:n.name,expose:".",remote:n}}const i=n.alias&&e.startsWith(n.alias);let s=n.alias&&e.replace(n.alias,"");if(n.alias&&i){if(s&&s.startsWith("/")){const a=n.alias;return s=`.${s}`,{pkgNameOrAlias:a,expose:s,remote:n}}else if(s==="")return{pkgNameOrAlias:n.alias,expose:".",remote:n}}}}function Ao(t,e){for(const n of t)if(e===n.name||n.alias&&e===n.alias)return n}function To(t,e){const n=Wt();return n.length>0&&n.forEach(o=>{t!=null&&t.find(r=>r.name!==o.name)&&t.push(o)}),t&&t.length>0&&t.forEach(o=>{e.forEach(r=>{r.applyPlugin(o)})}),t}async function Do({entry:t,remoteEntryExports:e}){return new Promise((n,o)=>{try{e?n(e):typeof FEDERATION_ALLOW_NEW_FUNCTION<"u"?new Function("callbacks",`import("${t}").then(callbacks[0]).catch(callbacks[1])`)([n,o]):import(t).then(n).catch(o)}catch(r){o(r)}})}async function Po({entry:t,remoteEntryExports:e}){return new Promise((n,o)=>{try{e?n(e):typeof __system_context__>"u"?System.import(t).then(n).catch(o):new Function("callbacks",`System.import("${t}").then(callbacks[0]).catch(callbacks[1])`)([n,o])}catch(r){o(r)}})}async function Mo({name:t,globalName:e,entry:n,loaderHook:o}){const{entryExports:r}=Oe(t,e);return r||Tt(n,{attrs:{},createScriptHook:(i,s)=>{const a=o.lifecycle.createScript.emit({url:i,attrs:s});if(a&&(a instanceof HTMLScriptElement||"script"in a||"timeout"in a))return a}}).then(()=>{const{remoteEntryKey:i,entryExports:s}=Oe(t,e);return R(s,F(Ve,H,{remoteName:t,remoteEntryUrl:n,remoteEntryKey:i})),s}).catch(i=>{throw R(void 0,F(Ye,H,{remoteName:t,resourceUrl:n})),i})}async function Lo({remoteInfo:t,remoteEntryExports:e,loaderHook:n}){const{entry:o,entryGlobalName:r,name:i,type:s}=t;switch(s){case"esm":case"module":return Do({entry:o,remoteEntryExports:e});case"system":return Po({entry:o,remoteEntryExports:e});default:return Mo({entry:o,globalName:r,name:i,loaderHook:n})}}function $e(t){const{entry:e,name:n}=t;return xe(n,e)}async function de({origin:t,remoteEntryExports:e,remoteInfo:n}){const o=$e(n);if(e)return e;if(!G[o]){const r=t.remoteHandler.hooks.lifecycle.loadEntry,i=t.loaderHook;G[o]=r.emit({loaderHook:i,remoteInfo:n,remoteEntryExports:e}).then(s=>s||Lo({remoteInfo:n,remoteEntryExports:e,loaderHook:i}))}return G[o]}function ye(t){return k({},t,{entry:"entry"in t?t.entry:"",type:t.type||ot,entryGlobalName:t.entryGlobalName||t.name,shareScope:t.shareScope||Y})}let ut=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;let t;try{t=await de({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports})}catch{const e=$e(this.remoteInfo);t=await this.host.loaderHook.lifecycle.loadEntryError.emit({getRemoteEntry:de,origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports,globalLoading:G,uniqueKey:e})}return R(t,`remoteEntryExports is undefined 
 ${je(this.remoteInfo)}`),this.remoteEntryExports=t,this.remoteEntryExports}async get(t,e,n,o){const{loadFactory:r=!0}=n||{loadFactory:!0},i=await this.getEntry();if(!this.inited){const c=this.host.shareScopeMap,u=this.remoteInfo.shareScope||"default";c[u]||(c[u]={});const h=c[u],p=[],f={version:this.remoteInfo.version||""};Object.defineProperty(f,"shareScopeMap",{value:c,enumerable:!1});const m=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:h,remoteEntryInitOptions:f,initScope:p,remoteInfo:this.remoteInfo,origin:this.host});typeof(i==null?void 0:i.init)>"u"&&P(F(We,H,{remoteName:name,remoteEntryUrl:this.remoteInfo.entry,remoteEntryKey:this.remoteInfo.entryGlobalName})),await i.init(m.shareScope,m.initScope,m.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(k({},m,{id:t,remoteSnapshot:o,remoteEntryExports:i}))}this.lib=i,this.inited=!0;let s;s=await this.host.loaderHook.lifecycle.getModuleFactory.emit({remoteEntryExports:i,expose:e,moduleInfo:this.remoteInfo}),s||(s=await i.get(e)),R(s,`${z(this.remoteInfo)} remote don't export ${e}.`);const a=jt(this.remoteInfo.name,e),l=this.wraperFactory(s,a);return r?await l():l}wraperFactory(t,e){function n(o,r){o&&typeof o=="object"&&Object.isExtensible(o)&&!Object.getOwnPropertyDescriptor(o,Symbol.for("mf_module_id"))&&Object.defineProperty(o,Symbol.for("mf_module_id"),{value:r,enumerable:!1})}return t instanceof Promise?async()=>{const o=await t();return n(o,e),o}:()=>{const o=t();return n(o,e),o}}constructor({remoteInfo:t,host:e}){this.inited=!1,this.lib=void 0,this.remoteInfo=t,this.host=e}};class A{on(e){typeof e=="function"&&this.listeners.add(e)}once(e){const n=this;this.on(function o(...r){return n.remove(o),e.apply(null,r)})}emit(...e){let n;return this.listeners.size>0&&this.listeners.forEach(o=>{n=o(...e)}),n}remove(e){this.listeners.delete(e)}removeAll(){this.listeners.clear()}constructor(e){this.type="",this.listeners=new Set,e&&(this.type=e)}}class T extends A{emit(...e){let n;const o=Array.from(this.listeners);if(o.length>0){let r=0;const i=s=>s===!1?!1:r<o.length?Promise.resolve(o[r++].apply(null,e)).then(i):s;n=i()}return Promise.resolve(n)}}function ht(t,e){if(!ge(e))return!1;if(t!==e){for(const n in t)if(!(n in e))return!1}return!0}class J extends A{emit(e){ge(e)||P(`The data for the "${this.type}" hook should be an object.`);for(const n of this.listeners)try{const o=n(e);if(ht(e,o))e=o;else{this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}}catch(o){ie(o),this.onerror(o)}return e}constructor(e){super(),this.onerror=P,this.type=e}}class x extends A{emit(e){ge(e)||P(`The response data for the "${this.type}" hook must be an object.`);const n=Array.from(this.listeners);if(n.length>0){let o=0;const r=s=>(ie(s),this.onerror(s),e),i=s=>{if(ht(e,s)){if(e=s,o<n.length)try{return Promise.resolve(n[o++](e)).then(i,r)}catch(a){return r(a)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return e};return Promise.resolve(i(e))}return Promise.resolve(e)}constructor(e){super(),this.onerror=P,this.type=e}}class U{applyPlugin(e){R(Ft(e),"Plugin configuration is invalid.");const n=e.name;R(n,"A name must be provided by the plugin."),this.registerPlugins[n]||(this.registerPlugins[n]=e,Object.keys(this.lifecycle).forEach(o=>{const r=e[o];r&&this.lifecycle[o].on(r)}))}removePlugin(e){R(e,"A name is required.");const n=this.registerPlugins[e];R(n,`The plugin "${e}" is not registered.`),Object.keys(n).forEach(o=>{o!=="name"&&this.lifecycle[o].remove(n[o])})}inherit({lifecycle:e,registerPlugins:n}){Object.keys(e).forEach(o=>{R(!this.lifecycle[o],`The hook "${o}" has a conflict and cannot be inherited.`),this.lifecycle[o]=e[o]}),Object.keys(n).forEach(o=>{R(!this.registerPlugins[o],`The plugin "${o}" has a conflict and cannot be inherited.`),this.applyPlugin(n[o])})}constructor(e){this.registerPlugins={},this.lifecycle=e,this.lifecycleKeys=Object.keys(e)}}function mt(t){return k({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},t)}function Ho(t,e){return e.map(n=>{const o=Ao(t,n.nameOrAlias);return R(o,`Unable to preload ${n.nameOrAlias} as it is not included in ${!o&&je({remoteInfo:o,remotes:t})}`),{remote:o,preloadConfig:mt(n)}})}function xo(t){return t?t.map(e=>e==="."?e:e.startsWith("./")?e.replace("./",""):e):[]}function ft(t,e,n,o=!0){const{cssAssets:r,jsAssetsWithoutEntry:i,entryAssets:s}=n;if(e.options.inBrowser){if(s.forEach(a=>{const{moduleInfo:l}=a,c=e.moduleCache.get(t.name);de(c?{origin:e,remoteInfo:l,remoteEntryExports:c.remoteEntryExports}:{origin:e,remoteInfo:l,remoteEntryExports:void 0})}),o){const a={rel:"preload",as:"style"};r.forEach(l=>{const{link:c,needAttach:u}=ce({url:l,cb:()=>{},attrs:a,createLinkHook:(h,p)=>{const f=e.loaderHook.lifecycle.createLink.emit({url:h,attrs:p});if(f instanceof HTMLLinkElement)return f}});u&&document.head.appendChild(c)})}else{const a={rel:"stylesheet",type:"text/css"};r.forEach(l=>{const{link:c,needAttach:u}=ce({url:l,cb:()=>{},attrs:a,createLinkHook:(h,p)=>{const f=e.loaderHook.lifecycle.createLink.emit({url:h,attrs:p});if(f instanceof HTMLLinkElement)return f},needDeleteLink:!1});u&&document.head.appendChild(c)})}if(o){const a={rel:"preload",as:"script"};i.forEach(l=>{const{link:c,needAttach:u}=ce({url:l,cb:()=>{},attrs:a,createLinkHook:(h,p)=>{const f=e.loaderHook.lifecycle.createLink.emit({url:h,attrs:p});if(f instanceof HTMLLinkElement)return f}});u&&document.head.appendChild(c)})}else{const a={fetchpriority:"high",type:(t==null?void 0:t.type)==="module"?"module":"text/javascript"};i.forEach(l=>{const{script:c,needAttach:u}=Be({url:l,cb:()=>{},attrs:a,createScriptHook:(h,p)=>{const f=e.loaderHook.lifecycle.createScript.emit({url:h,attrs:p});if(f instanceof HTMLScriptElement)return f},needDeleteScript:!0});u&&document.head.appendChild(c)})}}}function pt(t,e){const n=et(e);n.url||P(`The attribute remoteEntry of ${t.name} must not be undefined.`);let o=me(e,n.url);t.type=n.type,t.entryGlobalName=n.globalName,t.entry=o,t.version=e.version,t.buildVersion=e.buildVersion}function Fo(){return{name:"snapshot-plugin",async afterResolve(t){const{remote:e,pkgNameOrAlias:n,expose:o,origin:r,remoteInfo:i}=t;if(!_e(e)||!Xe(e)){const{remoteSnapshot:s,globalSnapshot:a}=await r.snapshotHandler.loadRemoteSnapshotInfo(e);pt(i,s);const l={remote:e,preloadConfig:{nameOrAlias:n,exposes:[o],resourceCategory:"sync",share:!1,depsRemote:!1}},c=await r.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:r,preloadOptions:l,remoteInfo:i,remote:e,remoteSnapshot:s,globalSnapshot:a});return c&&ft(i,r,c,!1),k({},t,{remoteSnapshot:s})}return t}}}function jo(t){const e=t.split(":");return e.length===1?{name:e[0],version:void 0}:e.length===2?{name:e[0],version:e[1]}:{name:e[1],version:e[2]}}function dt(t,e,n,o,r={},i){const s=z(e),{value:a}=B(t,s),l=i||a;if(l&&!Ce(l)&&(n(l,e,o),l.remotesInfo)){const c=Object.keys(l.remotesInfo);for(const u of c){if(r[u])continue;r[u]=!0;const h=jo(u),p=l.remotesInfo[u];dt(t,{name:h.name,version:p.matchedVersion},n,!1,r,void 0)}}}function Co(t,e,n,o,r){const i=[],s=[],a=[],l=new Set,c=new Set,{options:u}=t,{preloadConfig:h}=e,{depsRemote:p}=h;if(dt(o,n,(m,d,g)=>{let _;if(g)_=h;else if(Array.isArray(p)){const S=p.find(E=>E.nameOrAlias===d.name||E.nameOrAlias===d.alias);if(!S)return;_=mt(S)}else if(p===!0)_=h;else return;const b=me(m,et(m).url);b&&a.push({name:d.name,moduleInfo:{name:d.name,entry:b,type:"remoteEntryType"in m?m.remoteEntryType:"global",entryGlobalName:"globalName"in m?m.globalName:d.name,shareScope:"",version:"version"in m?m.version:void 0},url:b});let $="modules"in m?m.modules:[];const I=xo(_.exposes);if(I.length&&"modules"in m){var y;$=m==null||(y=m.modules)==null?void 0:y.reduce((S,E)=>((I==null?void 0:I.indexOf(E.moduleName))!==-1&&S.push(E),S),[])}function v(S){const E=S.map(w=>me(m,w));return _.filter?E.filter(_.filter):E}if($){const S=$.length;for(let E=0;E<S;E++){const w=$[E],ae=`${d.name}/${w.moduleName}`;t.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:w.moduleName==="."?d.name:ae,name:d.name,remoteSnapshot:m,preloadConfig:_,remote:d,origin:t}),!zt(ae)&&(_.resourceCategory==="all"?(i.push(...v(w.assets.css.async)),i.push(...v(w.assets.css.sync)),s.push(...v(w.assets.js.async)),s.push(...v(w.assets.js.sync))):(_.resourceCategory="sync")&&(i.push(...v(w.assets.css.sync)),s.push(...v(w.assets.js.sync))),qt(ae))}}},!0,{},r),r.shared){const m=(d,g)=>{const _=C(t.shareScopeMap,g.sharedName,d,t.sharedHandler.hooks.lifecycle.resolveShare);_&&typeof _.lib=="function"&&(g.assets.js.sync.forEach(b=>{l.add(b)}),g.assets.css.sync.forEach(b=>{c.add(b)}))};r.shared.forEach(d=>{var g;const _=(g=u.shared)==null?void 0:g[d.sharedName];if(!_)return;const b=d.version?_.find($=>$.version===d.version):_;b&&Qe(b).forEach($=>{m($,d)})})}const f=s.filter(m=>!l.has(m));return{cssAssets:i.filter(m=>!c.has(m)),jsAssetsWithoutEntry:f,entryAssets:a}}const Go=function(){return{name:"generate-preload-assets-plugin",async generatePreloadAssets(t){const{origin:e,preloadOptions:n,remoteInfo:o,remote:r,globalSnapshot:i,remoteSnapshot:s}=t;return _e(r)&&Xe(r)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:r.name,url:r.entry,moduleInfo:{name:o.name,entry:r.entry,type:o.type||"global",entryGlobalName:"",shareScope:""}}]}:(pt(o,s),Co(e,n,o,i,s))}}};function yt(t,e){const n=te({name:e.options.name,version:e.options.version}),o=n&&"remotesInfo"in n&&n.remotesInfo&&B(n.remotesInfo,t.name).value;return o&&o.matchedVersion?{hostGlobalSnapshot:n,globalSnapshot:Ne(),remoteSnapshot:te({name:t.name,version:o.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:Ne(),remoteSnapshot:te({name:t.name,version:"version"in t?t.version:void 0})}}class Uo{async loadSnapshot(e){const{options:n}=this.HostInstance,{hostGlobalSnapshot:o,remoteSnapshot:r,globalSnapshot:i}=this.getGlobalRemoteInfo(e),{remoteSnapshot:s,globalSnapshot:a}=await this.hooks.lifecycle.loadSnapshot.emit({options:n,moduleInfo:e,hostGlobalSnapshot:o,remoteSnapshot:r,globalSnapshot:i});return{remoteSnapshot:s,globalSnapshot:a}}async loadRemoteSnapshotInfo(e){const{options:n}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:n,moduleInfo:e});let o=te({name:this.HostInstance.options.name,version:this.HostInstance.options.version});o||(o={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},Vt({[this.HostInstance.options.name]:o})),o&&"remotesInfo"in o&&!B(o.remotesInfo,e.name).value&&("version"in e||"entry"in e)&&(o.remotesInfo=k({},o==null?void 0:o.remotesInfo,{[e.name]:{matchedVersion:"version"in e?e.version:e.entry}}));const{hostGlobalSnapshot:r,remoteSnapshot:i,globalSnapshot:s}=this.getGlobalRemoteInfo(e),{remoteSnapshot:a,globalSnapshot:l}=await this.hooks.lifecycle.loadSnapshot.emit({options:n,moduleInfo:e,hostGlobalSnapshot:r,remoteSnapshot:i,globalSnapshot:s});let c,u;if(a)if(Ce(a)){const h=a.remoteEntry,p=await this.getManifestJson(h,e,{}),f=Re(k({},e,{entry:h}),p);c=p,u=f}else{const{remoteSnapshot:h}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:a,from:"global"});c=h,u=l}else if(_e(e)){const h=await this.getManifestJson(e.entry,e,{}),p=Re(e,h),{remoteSnapshot:f}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:h,from:"global"});c=f,u=p}else P(F(Je,H,{hostName:e.name,hostVersion:e.version,globalSnapshot:JSON.stringify(l)}));return await this.hooks.lifecycle.afterLoadSnapshot.emit({options:n,moduleInfo:e,remoteSnapshot:c}),{remoteSnapshot:c,globalSnapshot:u}}getGlobalRemoteInfo(e){return yt(e,this.HostInstance)}async getManifestJson(e,n,o){const r=async()=>{let s=this.manifestCache.get(e);if(s)return s;try{let a=await this.loaderHook.lifecycle.fetch.emit(e,{});(!a||!(a instanceof Response))&&(a=await fetch(e,{})),s=await a.json()}catch(a){s=await this.HostInstance.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:e,error:P,from:"runtime",lifecycle:"afterResolve",origin:this.HostInstance}),s||(delete this.manifestLoading[e],P(F(ze,H,{manifestUrl:e,moduleName:n.name},`${a}`)))}return R(s.metaData&&s.exposes&&s.shared,`${e} is not a federation manifest`),this.manifestCache.set(e,s),s},i=async()=>{const s=await r(),a=kt(s,{version:e}),{remoteSnapshot:l}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:n,manifestJson:s,remoteSnapshot:a,manifestUrl:e,from:"manifest"});return l};return this.manifestLoading[e]||(this.manifestLoading[e]=i().then(s=>s)),this.manifestLoading[e]}constructor(e){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new U({beforeLoadRemoteSnapshot:new T("beforeLoadRemoteSnapshot"),loadSnapshot:new x("loadGlobalSnapshot"),loadRemoteSnapshot:new x("loadRemoteSnapshot"),afterLoadSnapshot:new x("afterLoadSnapshot")}),this.manifestLoading=q.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=e,this.loaderHook=e.loaderHook}}class Bo{registerShared(e,n){const{shareInfos:o,shared:r}=lt(e,n);return Object.keys(o).forEach(i=>{o[i].forEach(s=>{!C(this.shareScopeMap,i,s,this.hooks.lifecycle.resolveShare)&&s&&s.lib&&this.setShared({pkgName:i,lib:s.lib,get:s.get,loaded:!0,shared:s,from:n.name})})}),{shareInfos:o,shared:r}}async loadShare(e,n){const{host:o}=this,r=Pe({pkgName:e,extraOptions:n,shareInfos:o.options.shared});r!=null&&r.scope&&await Promise.all(r.scope.map(async c=>{await Promise.all(this.initializeSharing(c,{strategy:r.strategy}))}));const i=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:e,shareInfo:r,shared:o.options.shared,origin:o}),{shareInfo:s}=i;R(s,`Cannot find ${e} Share in the ${o.options.name}. Please ensure that the ${e} Share parameters have been injected`);const a=C(this.shareScopeMap,e,s,this.hooks.lifecycle.resolveShare),l=c=>{c.useIn||(c.useIn=[]),ve(c.useIn,o.options.name)};if(a&&a.lib)return l(a),a.lib;if(a&&a.loading&&!a.loaded){const c=await a.loading;return a.loaded=!0,a.lib||(a.lib=c),l(a),c}else if(a){const c=(async()=>{const u=await a.get();s.lib=u,s.loaded=!0,l(s);const h=C(this.shareScopeMap,e,s,this.hooks.lifecycle.resolveShare);return h&&(h.lib=u,h.loaded=!0),u})();return this.setShared({pkgName:e,loaded:!1,shared:a,from:o.options.name,lib:null,loading:c}),c}else{if(n!=null&&n.customShareInfo)return!1;const c=(async()=>{const u=await s.get();s.lib=u,s.loaded=!0,l(s);const h=C(this.shareScopeMap,e,s,this.hooks.lifecycle.resolveShare);return h&&(h.lib=u,h.loaded=!0),u})();return this.setShared({pkgName:e,loaded:!1,shared:s,from:o.options.name,lib:null,loading:c}),c}}initializeSharing(e=Y,n){const{host:o}=this,r=n==null?void 0:n.from,i=n==null?void 0:n.strategy;let s=n==null?void 0:n.initScope;const a=[];if(r!=="build"){const{initTokens:m}=this;s||(s=[]);let d=m[e];if(d||(d=m[e]={from:this.host.name}),s.indexOf(d)>=0)return a;s.push(d)}const l=this.shareScopeMap,c=o.options.name;l[e]||(l[e]={});const u=l[e],h=(m,d)=>{var g;const{version:_,eager:b}=d;u[m]=u[m]||{};const $=u[m],I=$[_],y=!!(I&&(I.eager||(g=I.shareConfig)!=null&&g.eager));(!I||I.strategy!=="loaded-first"&&!I.loaded&&(!b!=!y?b:c>I.from))&&($[_]=d)},p=m=>m&&m.init&&m.init(l[e],s),f=async m=>{const{module:d}=await o.remoteHandler.getRemoteModuleAndOptions({id:m});if(d.getEntry){let g;try{g=await d.getEntry()}catch(_){g=await o.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:m,error:_,from:"runtime",lifecycle:"beforeLoadShare",origin:o})}d.inited||(await p(g),d.inited=!0)}};return Object.keys(o.options.shared).forEach(m=>{o.options.shared[m].forEach(d=>{d.scope.includes(e)&&h(m,d)})}),(o.options.shareStrategy==="version-first"||i==="version-first")&&o.options.remotes.forEach(m=>{m.shareScope===e&&a.push(f(m.name))}),a}loadShareSync(e,n){const{host:o}=this,r=Pe({pkgName:e,extraOptions:n,shareInfos:o.options.shared});r!=null&&r.scope&&r.scope.forEach(a=>{this.initializeSharing(a,{strategy:r.strategy})});const i=C(this.shareScopeMap,e,r,this.hooks.lifecycle.resolveShare),s=a=>{a.useIn||(a.useIn=[]),ve(a.useIn,o.options.name)};if(i){if(typeof i.lib=="function")return s(i),i.loaded||(i.loaded=!0,i.from===o.options.name&&(r.loaded=!0)),i.lib;if(typeof i.get=="function"){const a=i.get();if(!(a instanceof Promise))return s(i),this.setShared({pkgName:e,loaded:!0,from:o.options.name,lib:a,shared:i}),a}}if(r.lib)return r.loaded||(r.loaded=!0),r.lib;if(r.get){const a=r.get();if(a instanceof Promise){const l=(n==null?void 0:n.from)==="build"?Ke:fe;throw new Error(F(l,H,{hostName:o.options.name,sharedPkgName:e}))}return r.lib=a,this.setShared({pkgName:e,loaded:!0,from:o.options.name,lib:r.lib,shared:r}),r.lib}throw new Error(F(fe,H,{hostName:o.options.name,sharedPkgName:e}))}initShareScopeMap(e,n,o={}){const{host:r}=this;this.shareScopeMap[e]=n,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:n,options:r.options,origin:r,scopeName:e,hostShareScopeMap:o.hostShareScopeMap})}setShared({pkgName:e,shared:n,from:o,lib:r,loading:i,loaded:s,get:a}){const{version:l,scope:c="default"}=n,u=Le(n,["version","scope"]);(Array.isArray(c)?c:[c]).forEach(h=>{if(this.shareScopeMap[h]||(this.shareScopeMap[h]={}),this.shareScopeMap[h][e]||(this.shareScopeMap[h][e]={}),!this.shareScopeMap[h][e][l]){this.shareScopeMap[h][e][l]=k({version:l,scope:["default"]},u,{lib:r,loaded:s,loading:i}),a&&(this.shareScopeMap[h][e][l].get=a);return}const p=this.shareScopeMap[h][e][l];i&&!p.loading&&(p.loading=i)})}_setGlobalShareScopeMap(e){const n=ct(),o=e.id||e.name;o&&!n[o]&&(n[o]=this.shareScopeMap)}constructor(e){this.hooks=new U({afterResolve:new x("afterResolve"),beforeLoadShare:new x("beforeLoadShare"),loadShare:new T,resolveShare:new J("resolveShare"),initContainerShareScopeMap:new J("initContainerShareScopeMap")}),this.host=e,this.shareScopeMap={},this.initTokens={},this._setGlobalShareScopeMap(e.options)}}class Vo{formatAndRegisterRemote(e,n){return(n.remotes||[]).reduce((o,r)=>(this.registerRemote(r,o,{force:!1}),o),e.remotes)}setIdToRemoteMap(e,n){const{remote:o,expose:r}=n,{name:i,alias:s}=o;if(this.idToRemoteMap[e]={name:o.name,expose:r},s&&e.startsWith(i)){const a=e.replace(i,s);this.idToRemoteMap[a]={name:o.name,expose:r};return}if(s&&e.startsWith(s)){const a=e.replace(s,i);this.idToRemoteMap[a]={name:o.name,expose:r}}}async loadRemote(e,n){const{host:o}=this;try{const{loadFactory:r=!0}=n||{loadFactory:!0},{module:i,moduleOptions:s,remoteMatchInfo:a}=await this.getRemoteModuleAndOptions({id:e}),{pkgNameOrAlias:l,remote:c,expose:u,id:h,remoteSnapshot:p}=a,f=await i.get(h,u,n,p),m=await this.hooks.lifecycle.onLoad.emit({id:h,pkgNameOrAlias:l,expose:u,exposeModule:r?f:void 0,exposeModuleFactory:r?void 0:f,remote:c,options:s,moduleInstance:i,origin:o});return this.setIdToRemoteMap(e,a),typeof m=="function"?m:f}catch(r){const{from:i="runtime"}=n||{from:"runtime"},s=await this.hooks.lifecycle.errorLoadRemote.emit({id:e,error:r,from:i,lifecycle:"onLoad",origin:o});if(!s)throw r;return s}}async preloadRemote(e){const{host:n}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:e,options:n.options,origin:n});const o=Ho(n.options.remotes,e);await Promise.all(o.map(async r=>{const{remote:i}=r,s=ye(i),{globalSnapshot:a,remoteSnapshot:l}=await n.snapshotHandler.loadRemoteSnapshotInfo(i),c=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:n,preloadOptions:r,remote:i,remoteInfo:s,globalSnapshot:a,remoteSnapshot:l});c&&ft(s,n,c)}))}registerRemotes(e,n){const{host:o}=this;e.forEach(r=>{this.registerRemote(r,o.options.remotes,{force:n==null?void 0:n.force})})}async getRemoteModuleAndOptions(e){const{host:n}=this,{id:o}=e;let r;try{r=await this.hooks.lifecycle.beforeRequest.emit({id:o,options:n.options,origin:n})}catch(m){if(r=await this.hooks.lifecycle.errorLoadRemote.emit({id:o,options:n.options,origin:n,from:"runtime",error:m,lifecycle:"beforeRequest"}),!r)throw m}const{id:i}=r,s=wo(n.options.remotes,i);R(s,F(qe,H,{hostName:n.options.name,requestId:i}));const{remote:a}=s,l=ye(a),c=await n.sharedHandler.hooks.lifecycle.afterResolve.emit(k({id:i},s,{options:n.options,origin:n,remoteInfo:l})),{remote:u,expose:h}=c;R(u&&h,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${i}.`);let p=n.moduleCache.get(u.name);const f={host:n,remoteInfo:l};return p||(p=new ut(f),n.moduleCache.set(u.name,p)),{module:p,moduleOptions:f,remoteMatchInfo:c}}registerRemote(e,n,o){const{host:r}=this,i=()=>{if(e.alias){const a=n.find(l=>{var c;return e.alias&&(l.name.startsWith(e.alias)||((c=l.alias)==null?void 0:c.startsWith(e.alias)))});R(!a,`The alias ${e.alias} of remote ${e.name} is not allowed to be the prefix of ${a&&a.name} name or alias`)}"entry"in e&&(e.entry.startsWith("http")||(e.entry=new URL(e.entry,window.location.origin).href)),e.shareScope||(e.shareScope=Y),e.type||(e.type=ot)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:e,origin:r});const s=n.find(a=>a.name===e.name);if(!s)i(),n.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:r});else{const a=[`The remote "${e.name}" is already registered.`,"Please note that overriding it may cause unexpected errors."];o!=null&&o.force&&(this.removeRemote(s),i(),n.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:r}),Fe(a.join(" ")))}}removeRemote(e){try{const{host:o}=this,{name:r}=e,i=o.options.remotes.findIndex(a=>a.name===r);i!==-1&&o.options.remotes.splice(i,1);const s=o.moduleCache.get(e.name);if(s){const a=s.remoteInfo,l=a.entryGlobalName;if(N[l]){var n;(n=Object.getOwnPropertyDescriptor(N,l))!=null&&n.configurable?delete N[l]:N[l]=void 0}const c=$e(s.remoteInfo);G[c]&&delete G[c],o.snapshotHandler.manifestCache.delete(a.entry);let u=a.buildVersion?xe(a.name,a.buildVersion):a.name;const h=N.__FEDERATION__.__INSTANCES__.findIndex(f=>a.buildVersion?f.options.id===u:f.name===u);if(h!==-1){const f=N.__FEDERATION__.__INSTANCES__[h];u=f.options.id||u;const m=ct();let d=!0;const g=[];Object.keys(m).forEach(_=>{const b=m[_];b&&Object.keys(b).forEach($=>{const I=b[$];I&&Object.keys(I).forEach(y=>{const v=I[y];v&&Object.keys(v).forEach(S=>{const E=v[S];E&&typeof E=="object"&&E.from===a.name&&(E.loaded||E.loading?(E.useIn=E.useIn.filter(w=>w!==a.name),E.useIn.length?d=!1:g.push([_,$,y,S])):g.push([_,$,y,S]))})})})}),d&&(f.shareScopeMap={},delete m[u]),g.forEach(([_,b,$,I])=>{var y,v,S;(S=m[_])==null||(v=S[b])==null||(y=v[$])==null||delete y[I]}),N.__FEDERATION__.__INSTANCES__.splice(h,1)}const{hostGlobalSnapshot:p}=yt(e,o);if(p){const f=p&&"remotesInfo"in p&&p.remotesInfo&&B(p.remotesInfo,e.name).key;f&&(delete p.remotesInfo[f],q.__FEDERATION__.__MANIFEST_LOADING__[f]&&delete q.__FEDERATION__.__MANIFEST_LOADING__[f])}o.moduleCache.delete(e.name)}}catch(o){Ze.log("removeRemote fail: ",o)}}constructor(e){this.hooks=new U({beforeRegisterRemote:new J("beforeRegisterRemote"),registerRemote:new J("registerRemote"),beforeRequest:new x("beforeRequest"),onLoad:new T("onLoad"),handlePreloadModule:new A("handlePreloadModule"),errorLoadRemote:new T("errorLoadRemote"),beforePreloadRemote:new T("beforePreloadRemote"),generatePreloadAssets:new T("generatePreloadAssets"),afterPreloadRemote:new T,loadEntry:new T}),this.host=e,this.idToRemoteMap={}}}class _t{initOptions(e){this.registerPlugins(e.plugins);const n=this.formatOptions(this.options,e);return this.options=n,n}async loadShare(e,n){return this.sharedHandler.loadShare(e,n)}loadShareSync(e,n){return this.sharedHandler.loadShareSync(e,n)}initializeSharing(e=Y,n){return this.sharedHandler.initializeSharing(e,n)}initRawContainer(e,n,o){const r=ye({name:e,entry:n}),i=new ut({host:this,remoteInfo:r});return i.remoteEntryExports=o,this.moduleCache.set(e,i),i}async loadRemote(e,n){return this.remoteHandler.loadRemote(e,n)}async preloadRemote(e){return this.remoteHandler.preloadRemote(e)}initShareScopeMap(e,n,o={}){this.sharedHandler.initShareScopeMap(e,n,o)}formatOptions(e,n){const{shared:o}=lt(e,n),{userOptions:r,options:i}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:n,options:e,shareInfo:o}),s=this.remoteHandler.formatAndRegisterRemote(i,r),{shared:a}=this.sharedHandler.registerShared(i,r),l=[...i.plugins];r.plugins&&r.plugins.forEach(u=>{l.includes(u)||l.push(u)});const c=k({},e,n,{plugins:l,remotes:s,shared:a});return this.hooks.lifecycle.init.emit({origin:this,options:c}),c}registerPlugins(e){const n=To(e,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook,this.bridgeHook]);this.options.plugins=this.options.plugins.reduce((o,r)=>(r&&o&&!o.find(i=>i.name===r.name)&&o.push(r),o),n||[])}registerRemotes(e,n){return this.remoteHandler.registerRemotes(e,n)}constructor(e){this.hooks=new U({beforeInit:new J("beforeInit"),init:new A,beforeInitContainer:new x("beforeInitContainer"),initContainer:new x("initContainer")}),this.version="0.10.0",this.moduleCache=new Map,this.loaderHook=new U({getModuleInfo:new A,createScript:new A,createLink:new A,fetch:new T,loadEntryError:new T,getModuleFactory:new T}),this.bridgeHook=new U({beforeBridgeRender:new A,afterBridgeRender:new A,beforeBridgeDestroy:new A,afterBridgeDestroy:new A});const n={id:ko(),name:e.name,plugins:[Fo(),Go()],remotes:[],shared:{},inBrowser:!0};this.name=e.name,this.options=n,this.snapshotHandler=new Uo(this),this.sharedHandler=new Bo(this),this.remoteHandler=new Vo(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...n.plugins,...e.plugins||[]]),this.options=this.formatOptions(n,e)}}function Me(){return typeof FEDERATION_BUILD_IDENTIFIER<"u"?FEDERATION_BUILD_IDENTIFIER:""}function Wo(t,e){const n=Me();return N.__FEDERATION__.__INSTANCES__.find(o=>!!(n&&o.options.id===Me()||o.options.name===t&&!o.options.version&&!e||o.options.name===t&&e&&o.options.version===e))}let D=null;function zo(t){const e=Wo(t.name,t.version);if(e)return e.initOptions(t),D||(D=e),e;{const n=Gt()||_t;return D=new n(t),Ct(D),D}}function qo(...t){return R(D,"Please call init first"),D.loadRemote.apply(D,t)}function Ko(...t){return R(D,"Please call init first"),D.loadShare.apply(D,t)}Ut(_t);const Yo=Object.freeze(Object.defineProperty({__proto__:null,init:zo,loadRemote:qo,loadShare:Ko},Symbol.toStringTag,{value:"Module"}));let gt,Et;const Jo=new Promise((t,e)=>{gt=t,Et=e});var Zo={initPromise:Jo,initResolve:gt,initReject:Et};export{Yo as d,Zo as f,zo as z};
//# sourceMappingURL=federated_module__mf_v__runtimeInit__mf_v__-CP6S-cNa.js.map
